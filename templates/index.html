<head>
<!-- Plotly.js -->
<link rel="stylesheet" type="text/css" href="static/styles.css">
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script>
$(document).ready(function(){
    $("#submit").click(function(){
        $.ajax({
            url: "http://localhost:5000/getCont?org="+$("#org").val()+"&repo="+$("#repo").val()+"&user="+$("#user").val(), 
            success: function(result){
                console.log('success');

                var layout=result.layout;
                var data=result.data;

                $("#slides").hide();
                $("#graph2").hide();
                $("#metrics").hide();
                $(".Explenations").hide();
    			$("#graph1").show();

                Plotly.newPlot('graph1', data, layout);
            },
            error: function(error,status){
                console.log('error');
                console.log(status);
            },
            complete: function(error,status){
                console.log('complete');
                console.log(status);
            }
        });
        $.ajax({
            url: "http://localhost:5000/getComm?org="+$("#org").val()+"&repo="+$("#repo").val()+"&user="+$("#user").val(), 
            success: function(result){
                console.log('success');

                var layout=result.layout;
                var data=result.data;

                $("#slides").hide();
                $("#graph1").hide();
                $("#metrics").hide();
                $(".Explenations").hide();
    			$("#graph2").show();

                Plotly.newPlot('graph2', data, layout);
            },
            error: function(error,status){
                console.log('error');
                console.log(status);
            },
            complete: function(error,status){
                console.log('complete');
                console.log(status);
            }
        });
        $.ajax({
            url: "http://localhost:5000/getAll?org="+$("#org").val()+"&repo="+$("#repo").val()+"&user="+$("#user").val(), 
            success: function(result){
                console.log('success');

                $("#slides").hide();
                $("#graph1").hide();
                $("#graph2").hide();
                $(".Explenations").hide();
                $("#metrics").show();

                $("#metrics").html(result)

            },
            error: function(error,status){
                console.log('error');
                console.log(status);
            },
            complete: function(error,status){
                console.log('complete');
                console.log(status);
            }
        });
    });
    $("#cont").click(function(){
    	$("#slides").hide();
    	$("#graph2").hide();
    	$("#metrics").hide();
    	$("#graph1").show();
    });
    $("#comm").click(function(){
    	$("#slides").hide();
    	$("#graph1").hide();
    	$("#metrics").hide();
    	$("#graph2").show();
    });
    $("#met").click(function(){
    	$("#slides").hide();
    	$("#graph2").hide();
    	$("#graph1").hide();
    	$("#metrics").show();
    });
});
</script>
</head>
<body>
<h1><a href="index.html">GraphGithub</a></h1>
<div id=form>
    <input id="user" type="text" name="user" value="AlexFabre" required>
    <input id="org" type="text" name="org" value="twbs" required>
    <input id="repo" type="text" name="repo" value="bootstrap-blog" required>
    <button id="submit">Go</button>
</div>
<div id="container">
	<div id="slides"><img src="static/dessin.svg"/></div>
    <div id="graph1"><div class="Explenations"><h2>About contribution</h2><br>Contribution are measured regarding each commit of every file. We use PyGithub3 API and native command line Github API.</div></div>
    <div id="graph2"><div class="Explenations"><h2>About comments</h2><br>Comments are extracted regarding each participant of every issue ('open' for the moment, 'close' issues might follow). We use PyGithub3 API.</div></div>
    <div id="metrics"><div class="Explenations">About metrics</div></div>
    <div id="prompt"><button class="col" id=cont>Contribution</button><button class="col" id=comm>Comments</button><button class="col" id=met>Metrics</button></div>
</div>
</body>

